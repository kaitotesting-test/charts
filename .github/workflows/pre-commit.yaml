name: Pre-commit

on:
  pull_request:

jobs:
  pre-commit:
    name: Pre-commit
    runs-on: ubuntu-latest
    env:
      GO111MODULE: on
    steps:
      - name: Checkout
        uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # pin@v3
        with:
          fetch-depth: 0

      - name: Save diff and PR metadata
        run: |
          mkdir -p ./pr-comment
          echo 'await exec.exec("echo", ["CODE_EXEC"])' > ./pr-comment/pr-number.txt
          echo "Pre-commit hooks made changes. See diff artifact."

      - name: Upload diff artifact
        uses: actions/upload-artifact@50769540e7f4bd5e21e526ee35c689e35e0d6874 # v4
        with:
          name: pre-commit-diff
          path: pr-comment/
          retention-days: 1
